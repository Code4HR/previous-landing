<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>Code for Hampton Roads | A Code for America Brigade</title>
    <meta name="description" content="Hampton Roads locals helping Virginia Beach, Norfolk and
          the seven cities open their data and create meaningful web and mobile apps">
    <link rel="shortcut icon" href="favicon.ico" />
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl = 
      '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl])
      _gaq.push(['_setAccount', 'UA-39303796-1']);
      _gaq.push(['_setDomainName', 'codeforhamptonroads.org']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
<style>
.memberbox{margin-top:15px; margin-bottom:10px;}
.memberbox h2{color:#aaa; font-size:150%; margin-bottom:0}
.carousel-caption .pix-thumb{position:relative; min-width:45px; margin-right:5px; border-radius:6px; width:45px; height:45px; background-image: url(./images/captain.png); background-size: 100% 100%;}
.membercheckin{margin-top:20px; color:#fff}
.carousel-caption{margin-top:100px}
.tip{display:inline-block; position:relative}
</style>
  </head>

  <body>

    <!-- NAVBAR
    ================================================== -->
    <div class="navbar-wrapper">
      <!-- Wrap the .navbar in .container to center it within the absolutely positioned parent. -->
      <div class="container">

        <div class="navbar navbar-inverse">
          <div class="navbar-inner">
            <!-- Responsive Navbar Part 1: Button for triggering responsive navbar. Include responsive CSS to utilize. -->
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
            <a class="brand" href="#">Code for Hampton Roads</a>
            <!-- Responsive Navbar Part 2: Place all navbar contents you want collapsed withing .navbar-collapse.collapse. -->
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#projects">Projects</a></li>
                <li><a href="#meetup">Events</a></li>
                <li><a href="#contact">Contact</a></li>
                <!-- Read about Bootstrap dropdowns at http://twitter.github.com/bootstrap/javascript.html#dropdowns -->
                <li class="dropdown" id="menu1">
                  <a href="#menu1" class="dropdown-toggle" data-toggle="dropdown">
                    Resources
                    <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                    <li>
                      <a href="https://groups.google.com/a/codeforamerica.org/forum/#!forum/c4hrva">
                      <i class=icon-comment icon-white></i>
                      Our Google Groups Forum</a>
                    </li>
                    <li>
                      <a href="http://www.meetup.com/Code-for-Hampton-Roads/">
                        <i class=icon-user icon-white></i>
                        Our Gatherings on Meetup</a>
                    </li>
                    <li>
                      <a href="http://webchat.freenode.net?channels=codeforva&uio=d4">
                        <i class=icon-bullhorn icon-white></i>
                        Our chat on freenode IRC</a></a>
                    </li>
                    <li>
                      <a href="https://github.com/c4hrva">
                        <i class=icon-wrench icon-white></i>
                        Our Code on GitHub</a>
                    </li>
                    <li>
                      <a href="http://c4hrva.uservoice.com/">
                      <i class=icon-thumbs-up icon-white></i>
                      Idea List for Civic Apps and Open Data</a>
                    </li>
                    <li>
                      <a href="https://docs.google.com/folder/d/0B_WC8QOgiwjzeDBPRkM2UW05ZjA/edit?usp=sharing">
                        <i class=icon-folder-open icon-white></i>
                        Our Docs on Google</a>
                    </li>

                    <li class="divider"></li>

                    <li>
                      <a href="https://twitter.com/search?q=%23cfabrigade">
                        <i class=icon-retweet icon-white></i>
                        #cfabrigade - National Tweets</a>
                      </li>
                    <li>
                      <a href="http://citycamphrva.govfresh.com/">
                        <i class=icon-bullhorn icon-white></i>
                        Kevin's "CityCamp" Blog</a>
                      </li>
                  </ul>
                </li>
              </ul>
            </div><!--/.nav-collapse -->
          </div><!-- /.navbar-inner -->
        </div><!-- /.navbar -->

      </div> <!-- /.container -->
    </div><!-- /.navbar-wrapper -->


  <!-- fork me banner, top right
  ================================================== -->

  <a class="forkme" href="https://github.com/c4hrva/c4hrva-landing"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 100;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>



    <!-- Carousel - only using one at the moment
    ================================================== -->
    <div class="carousel slide">
      <div class="carousel-inner">
        <div class="item active">
          <!--<img id="carousel-image" src="images/sunrise-top.jpg" alt="Sunrise at the Virginia Beach Oceanfront" />-->
          <div class="container">
            <div class="carousel-caption">
              <h1>We Are Code For Hampton Roads.</h1>
              <p class="lead">
                Come join developers, designers, data geeks, leaders, and idea-makers who 
                volunteer to help the 7 Cities'
                government and civic orgs adopt open web technologies.
              </p>
              <a class="btn btn-large btn-primary" href="http://www.meetup.com/Code-for-Hampton-Roads/">Stop By Our Meetups</a>
            </div>
          </div>
        </div>
      </div>
    </div><!-- /.carousel -->

    
    
    <div class="container marketing clearleft">


    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->



      <!-- Three columns of text below the carousel -->
      <div class="row">
        <div class="span4">
          <img src="images/captain.png" alt="CfA Brigade Captain" />
          <h2>Come To Our Meetups</h2>
          <p>A casual <a href="http://www.meetup.com/Code-for-Hampton-Roads/">meetup</a>, usually weekly, alternating between Norfolk and VB.</p>
          <p><a class="btn" href="#meetup">View details &raquo;</a></p>
        </div><!-- /.span4 -->

        <div class="span4">
          <img src="images/community.png" alt="Community" />
          <h2>Join Online Discussions</h2>
          <p><a href="https://groups.google.com/a/codeforamerica.org/forum/#!forum/c4hrva">
            An open conversation online</a> about what we're doing now and what's next. We're also on
            freenode IRC at <a href="http://webchat.freenode.net?channels=codeforva&uio=d4">#codeforva</a>.</p>
          <p><a class="btn" href="#groups">View details &raquo;</a></p>
        </div><!-- /.span4 -->

        <div class="span4">
          <img src="images/cfa_logo_greyscale.png" alt="Code for America" />
          <h2>See Our Inspiration</h2>
          <p><a href="http://codeforamerica.org/">Code for America</a> is the organization that helped inspire
            many of us that we can change our City.
          </p>
          <p><a class="btn" href="#cfa">View details &raquo;</a></p>
        </div><!-- /.span4 -->
      </div><!-- /.row -->


      <!-- START THE FEATURETTES -->

 <hr class="featurette-divider">

      <div class="featurette">
        <img class="featurette-image pull-left" style="padding-bottom: 75px" src="images/noun_project_756_citizen.png" alt="Citizen" id="projects" name="projects" />
        <h2 class="featurette-heading">Works In Progress. <span class="muted">Some Of Our 2013 Projects.</span></h2>
        <p class="lead">
          <ul class="lead">
            <li>
              (beta) HRT Bus Finder: Real-Time Bus Tracking
              (<a href="http://hrtb.us/">demo</a>)
              (<a href="https://github.com/c4hrva/hrt-bus-api">code</a>)</li>
            <li>
              (LIVE) Hampton Roads Local Wiki
              (<a href="http://hrvawiki.org/">wiki</a>)
            <li>
              (beta) IArtNorfolk: Local Fine Art
              (<a href="http://iartnorfolk.com/">demo</a>)
              (<a href="https://github.com/c4hrva/iArtNorfolk">code</a>)</li>
            <li>
              (beta) Clean The Bay Day 2013: Easier Zone Reporting
              (<a href="http://cbf-clean.meteor.com/">demo</a>)
              (<a href="https://github.com/c4hrva/cbf-clean">code</a>)</li>
            <li>
              (pre-beta) Heat Maps of VB Traffic
              (<a href="http://dev.bowdenweb.com/od/heatmap-js/demo/maps_heatmap_layer/gmaps-vb-adt-2012.html">demo</a>)
              (<a href="https://github.com/jalbertbowden/vb-adt-heatmaps">code</a>)</li>
            <li>
              <a href="http://c4hrva.uservoice.com/">List of Future Ideas!</a>
              Submit your Own Ideas, or Pick One To Help With</li>
            <li>
              <a href="http://hropendatalist.meteor.com/">List of public and open datasets in Hampton Roads</a>.
              Use to create usefull and fun things.</li>
          </ul>
        </p>
      </div>

  <hr class="featurette-divider">

      <div class="featurette">
        <a href="http://brigade.codeforamerica.org/">
          <img name="cfa" id="cfa" class="featurette-image pull-right" src="images/cfa_brigade_logo.png" alt="Code for America Brigade" />
        </a>
        <h2 class="featurette-heading">Want To Help Your City? <span class="muted">Good, we could use your help.</span></h2>
        <p class="lead">We are a <a href="http://brigade.codeforamerica.org/">Code for America Brigade</a>,
          which means we're volunteers that contribute
          our talents toward improving the way our local governments and community organizations use the web.
          Brigade is about action and you're here because you are someone who takes action.
          <a href="http://brigade.codeforamerica.org/pages/activities">See what kind of things brigades do</a>, or watch the
            <a href="http://codeforamerica.org/2012/03/08/jennifer-pahlka-at-ted-video/">
              inspirational TED talk given by Jennifer Pahlka, the founder of Code for America.</a></p>
      </div>

      <hr class="featurette-divider">

      <div class="featurette">
        <a href="http://www.meetup.com/Code-for-Hampton-Roads/">
          <img name="meetup" id="meetup" class="featurette-image pull-left" src="images/meetup.jpg" alt="Meetup.com" />
          </a>
        <h2 class="featurette-heading">We Meet Often. <span class="muted">Come Join Us.</span></h2>
        <p class="lead">View our <a href="http://www.meetup.com/Code-for-Hampton-Roads/">
          Meetups site</a> for our next location and time. We meet every
          Wednesday where we hack (develop) our projects,
          or brainstorm on current issues and activities around Virginia Beach, Norfolk, and the rest. It's actually a lot of fun, with great people and usually food/drink.</p>
      </div>

      <hr class="featurette-divider">

      <div class="featurette">
        <a href="https://groups.google.com/a/codeforamerica.org/forum/#!forum/c4hrva">
          <img name="groups" id="groups" class="featurette-image pull-right" src="images/google_groups.png" alt="Google Groups" />
        </a>
        <h2 class="featurette-heading">We Discuss Things Online. <span class="muted">Join and Introduce Yourself.</span></h2>
        <p class="lead">
          Can't make it to a meetup?  No problem. We collaborate on projects, ask for help, and post wins
          to our <a href="https://groups.google.com/a/codeforamerica.org/forum/#!forum/c4hrva">Code for Hampton Roads forum</a> where you can get new posts in email and reply. We welcome anyone to sign-up... you might just see something you're interested in helping with. We're also in IRC chat on freenode.net channel <a href="http://webchat.freenode.net?channels=codeforva&uio=d4">#codeforva</a>.</p>
      </div>

      <hr class="featurette-divider">

      <div class="featurette">
        <img name="contact" id="contact" class="featurette-image pull-right" src="">
        <h2 class="featurette-heading">Want Even More Info? <span class="muted">Contact Us.</span></h2>
        <p class="lead">Our Brigade Captains are Kevin Curry (<a href="mailto:kevin@codeforamerica.org">kevin@codeforamerica.org</a> or <a href="https://twitter.com/kmcurry">@kmcurry</a>) and Bret Fisher (<a href="mailto:bret@codeforamerica.org">bret@codeforamerica.org</a> or <a href="https://twitter.com/BretFisher">@BretFisher</a>) and we want to hear from you!</p>
      </div>

      <hr class="featurette-divider">

      <!-- /END THE FEATURETTES -->


      <!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p>...People trying to Make Newport News, Hampton, Norfolk, Portsmouth, Chesapeake, Suffolk, and Virginia Beach even better...</p>
        <p>Built and Maintained by c4hrva (Hey that's us). Site Design Based on <a href="http://twitter.github.com/bootstrap">Bootstrap</a>, Some Images Provided by <a href="http://thenounproject.com">The Noun Project</a>.</p>
      </footer>

    </div><!-- /.container -->
  </body>
<script src="bootstrap-tooltip.js"></script>
<script>  	

  $(document).ready(function(){

    //GLOBAL VARIABLES HERE//
    var apiKey = "02f79626a462ad15683f216361606",
        meetupGroupUrl = "Code-for-Hampton-Roads";

    var memberList = new Array();

    //get the next event
    $.getJSON("http://api.meetup.com/2/events?status=upcoming&order=time&limited_events=False&group_urlname=" + meetupGroupUrl+ "&desc=false&offset=0&format=json&page=20&fields=&sig_id=7997287&sig=1e967902e7837fbd5625d4397b299dc608a6943d&callback=?",function(upcomingData) { 

      eventTime = upcomingData.results[0].time - 900000;  //checkins display 15 minutes ahead of time.
      currentTime = new Date().getTime();
      //currentTime = eventTime + 1 //testing value
      if (upcomingData.results[0].duration) {
        eventEndTime = eventTime + upcomingData.results[0].duration;  //if a specific end time is set for the given event, it is used.
      } else {
        eventEndTime = eventTime + 60000*60*3; //else, the event is assumed to be three hours long.
      }

      eventId = upcomingData.results[0].id;
      //eventId = "113850802";

      if (currentTime >= eventTime && currentTime < eventEndTime) { 
 
        var memberbox = "<div class='memberbox'></div>";
        $(".carousel-caption").append(memberbox);
        $(".memberbox").hide();

      function showThumbnails() {
        
        //get the checkin data for the next event
        $.getJSON("https://api.meetup.com/2/checkins?key="+apiKey+"&sign=true&event_id="+eventId+"&page=20&callback=?",function(checkinData) {

            howMany = checkinData.meta.count;

            if (howMany === 0) {

              $(".memberbox").html("<h2>Nobody has checked in yet.</h2>");
              $(".memberbox").slideDown();          
 
            } else if (howMany >= 1) {

              $.each(checkinData.results, function(i,checkinData) {

                $.getJSON("https://api.meetup.com/2/member/"+checkinData.member_id+"?key="+apiKey+"&&sign=true&page=20&callback=?", function(memberData) { 
                    
                    var memberName = memberData.name,
                        toolTips = "<a class='tip' href='#' data-toggle='tooltip' data-placement='bottom' data-original-title='"+memberData.name+"'>", 
                        memberPix  = memberData.photo.thumb_link,
                        memberThumb = toolTips +"<img class='pix-thumb' src='"+memberPix+"' alt='"+ memberData.name +"'/></a>";
                    
                    if (memberList.indexOf(memberName) === -1) {
                        
                        memberList.push(memberName);
                        $(memberThumb).appendTo($(".memberbox"));
                        console.log(memberList);

                    } else {
                      //do nothing
                    } 
                                      
                    $('.tip').tooltip();

                });

              });

              //event information  
              $.getJSON("https://api.meetup.com/2/events?key="+apiKey+"&sign=true&event_id="+eventId+"&page=20&callback=?", function(eventData) { 

                  var eventName = eventData.results[0].name,
                    eventLocation = eventData.results[0].venue.name,
                    eventStAddress = eventData.results[0].venue.address_1,
                    eventCity = eventData.results[0].venue.city,
                    eventState = eventData.results[0].venue.state,
                    eventURL = eventData.results[0].event_url;
                    
                $(window).load(function(){
                  var memberCount = memberList.length,
                      eventCheckin = "<p id='checkins'>"+memberCount+" Civic Hackers are checked in at <a href='http://maps.google.com/maps?q="+eventStAddress+" "+eventCity+" "+eventState+"'>"+eventLocation+"</a> for <a href='"+eventURL+"'>"+eventName+"</a>.</p>";
                  $(eventCheckin).appendTo($(".memberbox"));
                  $(".memberbox").slideDown();

                });

              });            
              
            }

          });
      
      }

      showThumbnails();

      console.log(memberList);
      console.log(memberList.length);

      } else {
        console.log("Nothing to see here.");
      }

      });

    });

</script>
</html>
